bundle:
  name: telco-support-agent

variables:
  # Unity Catalog
  uc_catalog:
    description: Unity Catalog for all resources
    default: telco_customer_support_${bundle.target}
  agent_schema:
    description: Schema for agent models and functions
    default: agent
  data_schema:
    description: Schema for data tables
    default: gold
  model_name:
    description: Model name in UC
    default: telco_customer_support_agent
    
  # MLflow Experiment
  experiment_name:
    description: MLflow experiment name
    default: /Shared/telco_support_agent/${bundle.target}/${bundle.target}_telco_support_agent
    
  # Deployment
  endpoint_name:
    description: Model serving endpoint name
    default: ${bundle.target}-telco-customer-support-agent
  vector_search_endpoint_name:
    description: Vector search endpoint name
    default: ${bundle.target}-telco-support-agent-vector-search
  scale_to_zero_enabled:
    description: Enable scale to zero
    default: false
  workload_size:
    description: Endpoint workload size
    default: Small
    
  # Features
  disable_tools:
    description: Comma-separated list of tools to disable
    default: ""

permissions:
  - level: CAN_MANAGE
    group_name: telco-customer-support
  - level: CAN_VIEW
    group_name: users
  - level: CAN_MANAGE
    service_principal_name: fc51b87a-e4da-47a9-820e-deb6c056ec8b

include:
  - ./resources/**/*.yml

targets:
  dev:
    mode: development
    default: true
    workspace:
      host: https://e2-demo-west.cloud.databricks.com
    variables:
      disable_tools: ""
      
  staging:
    default: false
    workspace:
      host: https://e2-demo-west.cloud.databricks.com
    run_as:
      service_principal_name: fc51b87a-e4da-47a9-820e-deb6c056ec8b
    variables:
      scale_to_zero_enabled: true
      disable_tools: get_usage_info
      
  prod:
    default: false
    workspace:
      host: https://e2-demo-west.cloud.databricks.com
    run_as:
      service_principal_name: fc51b87a-e4da-47a9-820e-deb6c056ec8b
    variables:
      workload_size: Small
      scale_to_zero_enabled: false
      disable_tools: ""
