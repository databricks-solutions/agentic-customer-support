# yaml-language-server: $schema=../bundle_config_schema.json
artifacts:
  default:
    type: whl
    path: ../telco_support_agent/mcp_servers/outage_info_server
    build: uv build --wheel

sync:
  include:
    - ../telco_support_agent/mcp_servers/outage_info_server/build

resources:
  jobs:
    telco_log_register_deploy_agent:
      name: telco_log_register_deploy_agent_${bundle.target}
      tasks:
        - task_key: log_register_agent
          notebook_task:
            notebook_path: ../notebooks/03_log_register_agent/log_register_agent.py
            base_parameters:
              env: ${bundle.target}
              git_commit: ${bundle.git.commit}
              experiment_name: ${var.experiment_name}
              disable_tools: ${var.disable_tools}
        - task_key: deploy_agent
          depends_on:
            - task_key: log_register_agent
          notebook_task:
            notebook_path: ../notebooks/04_deploy_agent/deploy_agent.py
            base_parameters:
              env: ${bundle.target}
              git_commit: ${bundle.git.commit}
              experiment_name: ${var.experiment_name}

  apps:
    mcp-outage-info-server:
      name: "mcp-telco-outage-info-server"
      description: "Server containing telco outage info"
      source_code_path: ../telco_support_agent/mcp_servers/outage_info_server/build
